{"version":3,"sources":["components/Header.jsx","components/Banner.jsx","components/NewTweetForm.jsx","util/date.js","components/Avatar.jsx","components/EditTweetForm.jsx","components/TweetCard.jsx","pages/Login.jsx","context/AuthContext.jsx","components/Tweets.jsx","pages/AllTweets.jsx","pages/MyTweets.jsx","App.jsx","service/auth.js","service/tweet.js","network/http.js","db/token.js","network/socket.js","index.js"],"names":["Header","memo","username","onLogout","onMyTweets","onAllTweets","className","src","alt","onClick","Banner","text","isAlert","NewTweetForm","tweetService","onError","useState","tweet","setTweet","onSubmit","event","a","preventDefault","postTweet","then","created","catch","type","placeholder","value","required","autoFocus","onChange","target","parseDate","tdate","Date","parse","now","diff","Math","floor","round","month","toLocaleDateString","getDate","Avatar","url","name","charAt","EditTweetForm","onUpdate","onClose","setText","id","TweetCard","owner","onDelete","onUsernameClick","console","log","createdAt","editing","setEditing","Login","onSignUp","onLogin","signup","setSignup","setUsername","password","setPassword","setName","email","setEmail","setURL","setIsAlert","setError","error","toString","checked","htmlFor","AuthContext","createContext","contextRef","createRef","AuthProvider","authService","authErrorEventBus","children","undefined","user","setUser","useImperativeHandle","token","useEffect","listen","err","me","signUp","useCallback","logIn","login","logout","context","useMemo","Provider","AuthErrorEventBus","callback","this","useAuth","useContext","Tweets","addable","tweets","setTweets","history","useHistory","getTweets","stopSync","onSync","onCreated","tweetId","deleteTweet","filter","updateTweet","updated","map","item","push","setTimeout","transient","length","AllTweets","MyTweets","useParams","App","window","confirm","exact","path","AuthService","http","tokenStorage","fetch","method","body","JSON","stringify","data","saveToken","getToken","headers","Authorization","clearToken","TweetService","socket","query","getHeaders","HttpClient","baseURL","options","res","json","status","message","Error","notify","TOKEN","TokenStorage","localStorage","setItem","getItem","clear","Socket","getAccessToken","io","auth","cb","on","connected","connect","off","process","httpClient","socketClient","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a4d3b42b.chunk.js","sourcesContent":["import React, { memo } from 'react';\n\nconst Header = memo(({ username, onLogout, onMyTweets, onAllTweets }) => {\n  return (\n    <header className='header'>\n      <div className='logo'>\n        <img src='./img/logo.png' alt='Dwitter Logo' className='logo-img' />\n        <h1 className='logo-name'>Dwitter</h1>\n        {username && <span className='logo-user'>@{username}</span>}\n      </div>\n      {username && (\n        <nav className='menu'>\n          <button onClick={onAllTweets}>All Tweets</button>\n          <button onClick={onMyTweets}>My Tweets</button>\n          <button className='menu-item' onClick={onLogout}>\n            Logout\n          </button>\n        </nav>\n      )}\n    </header>\n  );\n});\n\nexport default Header;\n","import React, { memo } from 'react';\n\nconst Banner = memo(({ text, isAlert }) => (\n  <>\n    {text && (\n      <p className={`banner ${isAlert ? 'banner-red' : 'banner-green'}`}>\n        {text}\n      </p>\n    )}\n  </>\n));\nexport default Banner;\n","import React, { useState } from 'react';\n\nconst NewTweetForm = ({ tweetService, onError }) => {\n  const [tweet, setTweet] = useState('');\n\n  const onSubmit = async event => {\n    event.preventDefault();\n    tweetService\n      .postTweet(tweet)\n      .then(created => {\n        setTweet('');\n      })\n      .catch(onError);\n  };\n\n  const onChange = event => {\n    setTweet(event.target.value);\n  };\n\n  return (\n    <form className=\"tweet-form\" onSubmit={onSubmit}>\n      <input\n        type=\"text\"\n        placeholder=\"Edit your tweet\"\n        value={tweet}\n        required\n        autoFocus\n        onChange={onChange}\n        className=\"form-input tweet-input\"\n      />\n      <button type=\"submit\" className=\"form-btn\">\n        Post\n      </button>\n    </form>\n  );\n};\n\nexport default NewTweetForm;\n","export default function parseDate(tdate) {\n  const created = new Date(Date.parse(tdate));\n  const now = new Date();\n  const diff = Math.floor((now - created) / 1000);\n  if (diff <= 1) {\n    return 'just now';\n  }\n  if (diff < 20) {\n    return diff + ' seconds ago';\n  }\n  if (diff < 40) {\n    return 'half a minute ago';\n  }\n  if (diff < 60) {\n    return 'less than a minute ago';\n  }\n  if (diff <= 90) {\n    return 'one minute ago';\n  }\n  if (diff <= 3540) {\n    return Math.round(diff / 60) + ' minutes ago';\n  }\n  if (diff <= 5400) {\n    return '1 hour ago';\n  }\n  if (diff <= 86400) {\n    return Math.round(diff / 3600) + ' hours ago';\n  }\n  if (diff <= 129600) {\n    return '1 day ago';\n  }\n  if (diff < 604800) {\n    return Math.round(diff / 86400) + ' days ago';\n  }\n  if (diff <= 777600) {\n    return '1 week ago';\n  }\n  const month = created.toLocaleDateString('default', { month: 'long' });\n  return `on ${month} ${created.getDate()}`;\n}\n","import React, { memo } from 'react';\n\nconst Avatar = memo(({ url, name }) => (\n  <div>\n    {!!url ? (\n      <img src={url} alt='avatar' className='avatar-img' />\n    ) : (\n      <div className='avatar-txt'>{name.charAt(0)}</div>\n    )}\n  </div>\n));\n\nexport default Avatar;\n","import React, { useState } from 'react';\n\nconst EditTweetForm = ({ tweet, onUpdate, onClose }) => {\n  const [text, setText] = useState(tweet.text);\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    onUpdate(tweet.id, text);\n    onClose();\n  };\n\n  const onChange = (event) => {\n    setText(event.target.value);\n  };\n\n  return (\n    <form className='edit-tweet-form' onSubmit={onSubmit}>\n      <input\n        type='text'\n        placeholder='Edit your tweet'\n        value={text}\n        required\n        autoFocus\n        onChange={onChange}\n        className='form-input tweet-input'\n      />\n      <div className='edit-tweet-form-action'>\n        <button type='submit' className='form-btn-update'>\n          Update\n        </button>\n        <button type='button' className='form-btn-cancel' onClick={onClose}>\n          Cancel\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default EditTweetForm;\n","import React, { memo, useState } from 'react';\nimport parseDate from '../util/date';\nimport Avatar from './Avatar';\nimport EditTweetForm from './EditTweetForm';\n\nconst TweetCard = memo(\n  ({ tweet, owner, onDelete, onUpdate, onUsernameClick }) => {\n    console.log('here');\n    const { id, username, name, url, text, createdAt } = tweet;\n    const [editing, setEditing] = useState(false);\n    const onClose = () => setEditing(false);\n\n    return (\n      <li className=\"tweet\">\n        <section className=\"tweet-container\">\n          <Avatar url={url} name={name} />\n          <div className=\"tweet-body\">\n            <span className=\"tweet-name\">{name}</span>\n            <span\n              className=\"tweet-username\"\n              onClick={() => onUsernameClick(tweet)}\n            >\n              @{username}\n            </span>\n            <span className=\"tweet-date\"> · {parseDate(createdAt)}</span>\n            <p>{text}</p>\n            {editing && (\n              <EditTweetForm\n                tweet={tweet}\n                onUpdate={onUpdate}\n                onClose={onClose}\n              />\n            )}\n          </div>\n        </section>\n        {owner && (\n          <div className=\"tweet-action\">\n            <button className=\"tweet-action-btn\" onClick={() => onDelete(id)}>\n              x\n            </button>\n            <button\n              className=\"tweet-action-btn\"\n              onClick={() => setEditing(true)}\n            >\n              ✎\n            </button>\n          </div>\n        )}\n      </li>\n    );\n  }\n);\nexport default TweetCard;\n","import React, { useState } from 'react';\nimport Banner from '../components/Banner';\n\nconst Login = ({ onSignUp, onLogin }) => {\n  const [signup, setSignup] = useState(false);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [url, setURL] = useState('');\n  const [text, setText] = useState('');\n  const [isAlert, setIsAlert] = useState(false);\n\n  const onSubmit = (event) => {\n    event.preventDefault();\n    if (signup) {\n      onSignUp(username, password, name, email, url).catch(setError);\n    } else {\n      onLogin(username, password).catch(setError);\n    }\n  };\n\n  const setError = (error) => {\n    setText(error.toString());\n    setIsAlert(true);\n  };\n\n  const onChange = (event) => {\n    const {\n      target: { name, value, checked },\n    } = event;\n    switch (name) {\n      case 'username':\n        return setUsername(value);\n      case 'password':\n        return setPassword(value);\n      case 'name':\n        return setName(value);\n      case 'email':\n        return setEmail(value);\n      case 'url':\n        return setURL(value);\n      case 'signup':\n        return setSignup(checked);\n      default:\n    }\n  };\n\n  return (\n    <>\n      <Banner text={text} isAlert={isAlert} />\n      <form className='auth-form' onSubmit={onSubmit}>\n        <input\n          name='username'\n          type='text'\n          placeholder='Id'\n          value={username}\n          onChange={onChange}\n          className='form-input'\n          required\n        />\n        <input\n          name='password'\n          type='password'\n          placeholder='Password'\n          value={password}\n          className='form-input'\n          onChange={onChange}\n        />\n        {signup && (\n          <input\n            name='name'\n            type='text'\n            placeholder='Name'\n            value={name}\n            onChange={onChange}\n            className='form-input'\n            required\n          />\n        )}\n        {signup && (\n          <input\n            name='email'\n            type='email'\n            placeholder='Email'\n            value={email}\n            onChange={onChange}\n            className='form-input'\n            required\n          />\n        )}\n        {signup && (\n          <input\n            name='url'\n            type='url'\n            placeholder='Profile Image URL'\n            value={url}\n            onChange={onChange}\n            className='form-input'\n          />\n        )}\n        <div className='form-signup'>\n          <input\n            name='signup'\n            id='signup'\n            type='checkbox'\n            onChange={onChange}\n            checked={signup}\n          />\n          <label htmlFor='signup'> Create a new account?</label>\n        </div>\n        <button className='form-btn auth-form-btn' type='submit'>\n          {signup ? 'Sign Up' : 'Sign In'}\n        </button>\n      </form>\n    </>\n  );\n};\n\nexport default Login;\n","import {\n  createContext,\n  createRef,\n  useCallback,\n  useContext,\n  useEffect,\n  useImperativeHandle,\n  useMemo,\n  useState,\n} from 'react';\nimport Header from '../components/Header';\nimport Login from '../pages/Login';\n\nconst AuthContext = createContext({});\n\nconst contextRef = createRef();\n\nexport function AuthProvider({ authService, authErrorEventBus, children }) {\n  const [user, setUser] = useState(undefined);\n\n  useImperativeHandle(contextRef, () => (user ? user.token : undefined));\n\n  //토큰이 만료되면 유저를 undefined로 변경하고 로그인 페이지로 이동시킴\n  useEffect(() => {\n    authErrorEventBus.listen(err => {\n      console.log(err);\n      setUser(undefined);\n    });\n  }, [authErrorEventBus]);\n\n  useEffect(() => {\n    authService.me().then(setUser).catch(console.error);\n  }, [authService]);\n\n  const signUp = useCallback(\n    async (username, password, name, email, url) =>\n      authService\n        .signup(username, password, name, email, url)\n        .then(user => setUser(user)),\n    [authService]\n  );\n\n  const logIn = useCallback(\n    async (username, password) =>\n      authService.login(username, password).then(user => setUser(user)),\n    [authService]\n  );\n\n  const logout = useCallback(\n    async () => authService.logout().then(() => setUser(undefined)),\n    [authService]\n  );\n\n  const context = useMemo(\n    () => ({\n      user,\n      signUp,\n      logIn,\n      logout,\n    }),\n    [user, signUp, logIn, logout]\n  );\n\n  return (\n    <AuthContext.Provider value={context}>\n      {user ? (\n        children\n      ) : (\n        <div className=\"app\">\n          <Header />\n          <Login onSignUp={signUp} onLogin={logIn} />\n        </div>\n      )}\n    </AuthContext.Provider>\n  );\n}\n\nexport class AuthErrorEventBus {\n  listen(callback) {\n    this.callback = callback;\n  }\n  notify(error) {\n    this.callback(error);\n  }\n}\n\nexport default AuthContext;\nexport const fetchToken = () => contextRef.current;\nexport const useAuth = () => useContext(AuthContext);\n","import React, { memo, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Banner from './Banner';\nimport NewTweetForm from './NewTweetForm';\nimport TweetCard from './TweetCard';\nimport { useAuth } from '../context/AuthContext';\n\nconst Tweets = memo(({ tweetService, username, addable }) => {\n  const [tweets, setTweets] = useState([]);\n  const [error, setError] = useState('');\n  const history = useHistory();\n  const { user } = useAuth();\n\n  useEffect(() => {\n    //전체 트윗을 받아옴\n    tweetService\n      .getTweets(username)\n      .then(tweets => setTweets([...tweets]))\n      .catch(onError);\n\n    // 컴포넌트가 끝날때 스톱\n    const stopSync = tweetService.onSync(tweet => onCreated(tweet));\n    return () => stopSync();\n  }, [tweetService, username, user]);\n\n  const onCreated = tweet => {\n    setTweets(tweets => [tweet, ...tweets]);\n  };\n\n  const onDelete = tweetId =>\n    tweetService\n      .deleteTweet(tweetId)\n      .then(() =>\n        setTweets(tweets => tweets.filter(tweet => tweet.id !== tweetId))\n      )\n      .catch(error => setError(error.toString()));\n\n  const onUpdate = (tweetId, text) =>\n    tweetService\n      .updateTweet(tweetId, text)\n      .then(updated =>\n        setTweets(tweets =>\n          tweets.map(item => (item.id === updated.id ? updated : item))\n        )\n      )\n      .catch(error => error.toString());\n\n  const onUsernameClick = tweet => history.push(`/${tweet.username}`);\n\n  const onError = error => {\n    setError(error.toString());\n    setTimeout(() => {\n      setError('');\n    }, 3000);\n  };\n\n  return (\n    <>\n      {addable && (\n        <NewTweetForm tweetService={tweetService} onError={onError} />\n      )}\n      {error && <Banner text={error} isAlert={true} transient={true} />}\n      {tweets.length === 0 && <p className=\"tweets-empty\">No Tweets Yet</p>}\n      <ul className=\"tweets\">\n        {tweets.map(tweet => (\n          <TweetCard\n            key={tweet.id}\n            tweet={tweet}\n            owner={tweet.username === user.username}\n            onDelete={onDelete}\n            onUpdate={onUpdate}\n            onUsernameClick={onUsernameClick}\n          />\n        ))}\n      </ul>\n    </>\n  );\n});\nexport default Tweets;\n","import React from 'react';\nimport Tweets from '../components/Tweets';\n\nconst AllTweets = ({ tweetService }) => (\n  <Tweets tweetService={tweetService} addable={true} />\n);\n\nexport default AllTweets;\n","import React from 'react';\nimport { useParams } from 'react-router-dom';\nimport Tweets from '../components/Tweets';\n\nconst MyTweets = ({ tweetService }) => {\n  const { username } = useParams();\n  return (\n    <Tweets tweetService={tweetService} username={username} addable={false} />\n  );\n};\n\nexport default MyTweets;\n","import { Switch, Route, useHistory } from 'react-router-dom';\nimport Header from './components/Header';\nimport AllTweets from './pages/AllTweets';\nimport MyTweets from './pages/MyTweets';\nimport { useAuth } from './context/AuthContext';\n\nfunction App({ tweetService }) {\n  const history = useHistory();\n  const { user, logout } = useAuth();\n\n  const onAllTweets = () => {\n    history.push('/');\n  };\n\n  const onMyTweets = () => {\n    history.push(`/${user.username}`);\n  };\n\n  const onLogout = () => {\n    if (window.confirm('Do you want to log out?')) {\n      logout();\n      history.push('/');\n    }\n  };\n\n  return (\n    <div className='app'>\n      <Header\n        username={user.username}\n        onLogout={onLogout}\n        onAllTweets={onAllTweets}\n        onMyTweets={onMyTweets}\n      />\n      <Switch>\n        (\n        <>\n          <Route exact path='/'>\n            <AllTweets tweetService={tweetService} />\n          </Route>\n          <Route exact path='/:username'>\n            <MyTweets tweetService={tweetService} />\n          </Route>\n        </>\n        )\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","export default class AuthService {\n  constructor(http, tokenStorage) {\n    this.http = http;\n    this.tokenStorage = tokenStorage;\n  }\n\n  async signup(username, password, name, email, url) {\n    const data = await this.http.fetch('/auth/signup', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        password,\n        name,\n        email,\n        url,\n      }),\n    });\n    this.tokenStorage.saveToken(data.token);\n    return data;\n  }\n\n  async login(username, password) {\n    const data = await this.http.fetch('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({ username, password }),\n    });\n    this.tokenStorage.saveToken(data.token);\n    return data;\n  }\n\n  // 저장된 토큰을 받아 me를 이용해서 사용자 인증으로 사용한다.\n  async me() {\n    const token = this.tokenStorage.getToken();\n    return this.http.fetch('/auth/me', {\n      method: 'GET',\n      headers: { Authorization: `Bearer ${token}` },\n    });\n  }\n\n  async logout() {\n    this.tokenStorage.clearToken();\n  }\n}\n","export default class TweetService {\n  constructor(http, tokenStorage, socket) {\n    this.http = http;\n    this.tokenStorage = tokenStorage;\n    this.socket = socket;\n  }\n\n  async getTweets(username) {\n    const query = username ? `?username=${username}` : '';\n    return this.http.fetch(`/tweets${query}`, {\n      method: 'GET',\n      headers: this.getHeaders(),\n    });\n  }\n\n  async postTweet(text) {\n    return this.http.fetch(`/tweets`, {\n      method: 'POST',\n      headers: this.getHeaders(),\n      body: JSON.stringify({ text, username: 'ellie', name: 'Ellie' }),\n    });\n  }\n\n  async deleteTweet(tweetId) {\n    return this.http.fetch(`/tweets/${tweetId}`, {\n      method: 'DELETE',\n      headers: this.getHeaders(),\n    });\n  }\n\n  async updateTweet(tweetId, text) {\n    return this.http.fetch(`/tweets/${tweetId}`, {\n      method: 'PUT',\n      headers: this.getHeaders(),\n      body: JSON.stringify({ text }),\n    });\n  }\n\n  getHeaders() {\n    const token = this.tokenStorage.getToken();\n    return {\n      Authorization: `Bearer ${token}`,\n    };\n  }\n\n  onSync(callback) {\n    return this.socket.onSync('tweets', callback);\n  }\n}\n","export default class HttpClient {\n  constructor(baseURL, authErrorEventBus) {\n    this.baseURL = baseURL;\n    this.authErrorEventBus = authErrorEventBus;\n  }\n\n  async fetch(url, options) {\n    const res = await fetch(`${this.baseURL}${url}`, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        ...options.headers,\n      },\n    });\n    let data;\n    try {\n      data = await res.json();\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (res.status > 299 || res.status < 200) {\n      const message =\n        data && data.message ? data.message : 'Something went wrong! 🤪';\n      const error = new Error(message);\n      if (res.status === 401) {\n        this.authErrorEventBus.notify(error);\n        return;\n      }\n      throw error;\n    }\n    return data;\n  }\n}\n","const TOKEN = 'token';\n\nexport default class TokenStorage {\n  saveToken(token) {\n    localStorage.setItem(TOKEN, token);\n  }\n\n  getToken() {\n    return localStorage.getItem(TOKEN);\n  }\n\n  clearToken() {\n    localStorage.clear(TOKEN);\n  }\n}\n","import socket from 'socket.io-client';\n\nexport default class Socket {\n  constructor(baseURL, getAccessToken) {\n    // 토큰을 생성\n    this.io = socket(baseURL, {\n      auth: cb => cb({ token: getAccessToken() }), // 토큰전달\n    });\n    this.io.on('connect_error', err => {\n      console.log('socket error', err.message);\n    });\n  }\n  // 연결이 안됬을때 재연결\n  onSync(event, callback) {\n    if (!this.io.connected) {\n      this.io.connect();\n    }\n    this.io.on(event, message => callback(message));\n    return () => this.io.off(event); // 더이상 듣고 싶지않을때 이 콜백을 부르면 된다.\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport AuthService from './service/auth';\nimport TweetService from './service/tweet';\nimport { BrowserRouter } from 'react-router-dom';\nimport { AuthProvider } from './context/AuthContext';\nimport { AuthErrorEventBus } from './context/AuthContext';\nimport HttpClient from './network/http';\nimport TokenStorage from './db/token';\nimport Socket from './network/socket';\n\nconst baseURL = process.env.REACT_APP_BASE_URL;\nconst tokenStorage = new TokenStorage();\nconst authErrorEventBus = new AuthErrorEventBus();\nconst httpClient = new HttpClient(baseURL, authErrorEventBus);\nconst authService = new AuthService(httpClient, tokenStorage);\n// 소켓통신 - baseurl과 저장된 토큰을 전달\nconst socketClient = new Socket(baseURL, () => tokenStorage.getToken());\nconst tweetService = new TweetService(httpClient, tokenStorage, socketClient);\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <AuthProvider\n        authService={authService}\n        authErrorEventBus={authErrorEventBus}\n      >\n        <App tweetService={tweetService} />\n      </AuthProvider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}